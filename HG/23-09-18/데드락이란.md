# 데드락이란?

> 프로세스들이 하나의 자원 혹은 서로가 가진 자원(하드웨어도 가능)을 무한히 기다리며 다음 처리를 하지 못하는 상태 

**4가지 조건이 충족되어야 발생한다**

1. 상호배제 : 하나의 프로세스만이 자원 사용가능 

2. 비선점 : 강제로 뺏기지 않음

3. 보유대기 : 다른 자원 기다릴 때 다른 자원을 얻을 때까지 보유 자원을 놓지 않음 

4. 환형 대기 : 자원을 기다리는 사이클 

**처리방법**

1. 데드락 prevention : 4가지 조건 중 어느 하나가 만족되지 않도록 하기 

2. 데드락 avoidance : 부가적인 정보를 이용해 데드락 가능성이 없을 떄만 자원을 할당하게 함 

3. 데드락 detection and recovery : 데드락 발생 허용 하지만 탐지해서 발견시 recover하게 함

4. 데드락 ignorance : 데드락을 시스템을 책임지지 않음 

## 처리방법 1 Deadlock Prevention

- 프로세스가 자원을 요청할 때 다른 어떤 자원도 가지고 있지 않아야 할당 

- 자원이 필요하면 보유 자원을 모두 놓고 요청 

- 빼앗기지 않는 조건 없애기 (CPU, memory 같이 상태 저장이 가능한 자원에서 주로 사용)

- 자원에 할당 순서를 매겨서 순서대로만 자원 할당 

-> 매우 비효율적 

## 처리방법 2 Deadlock Avoidance

- 프로세스마다 자원을 얼마나 쓰는지에 대한 정보 같이 추가 정보를 받아서 데드락 가능성을 체크한 후 발생하지 않을 것 같을 때만 자원 할당 
  
  - **Banker's Algorithm**

## 처리방법 3 Deadlock Detection and recovery

- 그냥 데드락 생기게 놔두는 방법 

- 데드락을 예측해서 여유자원을 안주고 묶어두면 효율이 떨어진다는 측면 

- 그냥 자원을 할당하고 데드락 생기면 recovery 
  
  1. 데드락에 연루된 모든 프로세스 종료 
  
  2. 데드락에 연루된 프로세스를 하나씩 종료해보기 

## 처리방법 4 Deadlock Ignorance

- 운영체제가 데드락에 관여 안함

- 데드락이 엄청 드물게 발생하기 때문에 관여하는 것 자체가 비효율적이라 판단 

- 사용자가 비정상적 작동을 느끼고 프로세스를 직접 종료하는 등의 방법으로 대처 

- **현대 범용 운영체제들은 모두 이것을 채택**


