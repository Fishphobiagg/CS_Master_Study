# 전송계층

작성일시: 2023년 7월 31일 오후 9:03

## 전송 계층의 역할

- 데이터가 목적지에 중복, 누락 없이 전달될 수 있도록 신뢰성 담보
- 오류 점검, 목적지의 애플리케이션 식별 기능 제공

---

## 연결형 vs 비연결형 통신

### 연결형 통신

> 데이터 교환 전 연결을 맺고 데이터를 교환하는 동안 계속 연결을 관리
> 

신뢰할 수 있고 정확한 데이터를 전송한다.

ex) TCP

### 비연결형 통신

> 연결에 대한 초기화 과정 없이 데이터 전송
> 

효율적으로 데이터를 전송한다.

ex) UDP

---

## TCP: Transmission Control Protocol

TCP 헤더 + 데이터 → 세그먼트

<img src="https://media.geeksforgeeks.org/wp-content/uploads/TCP-connection-1.png">

### 3-way handshake

1. 송신자가 수신자에게 SYN 패킷을 보낸다.
2. 수신자는 패킷을 받고 허가한다는 응답을 회신하기 위해 ACK 패킷을 보낸다.
    
    또한 데이터 전송을 허가받기 위해 SYN을 보낸다.
    
3. 수신자는 연결 확립 응답(ACK)을 보낸다.

<img src="https://media.geeksforgeeks.org/wp-content/uploads/CN.png">

### 4-way handshake

1. 연결 종료 요청
2. 연결 종료 응답
3. 데이터를 모두 보낸 후 연결 종료 요청
4. 연결 종료 응답

TCP는 헤더에 일련번호, 확인 응답 번호를 사용한다.

몇 번째 데이터인지, 몇 번째 데이터를 수신했는지 알려준다.

### Flow Control

송신측의 데이터 전달 속도보다 수신측의 데이터 처리 속도가 느리면? 문제가 발생한다.

수신 버퍼를 사용하고 남은 용량을 송신측에 알려 버퍼를 초과하지 않도록 데이터를 전송한다.

### Congestion Control

한 라우터에 데이터가 몰리면 자신에게 온 데이터를 모두 처리할 수 없다.

재전송, 혼잡의 악순환이 이어지기 때문에 송신측의 데이터 전송 속도를 강제로 줄인다.

---

## UDP

데이터를 효율적이고 빠르게 보낼 때 사용한다.

연결 확인 작업이 없으며 간단한 헤더 구조를 가지고 있다.

목적지와 관계없이 일괄적으로 데이터를 전송하는 브로드캐스트 기능을 사용 가능하다.