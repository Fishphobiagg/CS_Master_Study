# 스프링 DI, IOC

자바 언어 기반의 프레임 워크 → 좋은 객체 지향 애플리케이션을 개발할 수 있게 돕는다.

### 제어의 역전(IoC)

개발자 대신 프레임워크가 프로그램의 제어 흐름을 가지고 있다.

구현 객체는 자신의 로직을 실행하는 역할만 담당한다.

### 의존관계 주입(DI)

의존관계는 정적인 클래스 의존 관계와 실행 시점에 결정되는 동적인 객체 의존 관계를 분리해서 생각한다.

의존관계 주입을 사용하면 정적인 클래스의 의존관계를 변경하지 않고

동적인 객체 의존 관계를 설정할 수 있다.

### IoC 컨테이너, DI 컨테이너

AppConfig 파일처럼 객체를 생성, 관리, 의존관계 연결

스프링은 다음 기술로 다형성 + OCP, DIP를 가능하게 지원

- DI(Dependency Injection) 의존관계, 의존성 주입
- DI 컨테이너 제공

→ 클라이언트 코드 변경 없이 구현

### 스프링 빈(Bean)

스프링 컨테이너에 의해 관리되는 자바 객체

스프링 컨테이너는 객체 인스턴스를 싱글톤 패턴(기본값)을 활용하여 빈으로 관리한다.

### 스프링 컨테이너

스프링 컨테이너는 싱글톤 패턴을 적용하지 않아도 객체 인스턴스를 싱글톤으로 관리한다.

주의점! → 무상태로 설계해야 한다.

- 하나의 객체 인스턴스를 공유하기 때문
- 가급적 읽기만 가능해야한다.
- 값을 변경할 수 있는 필드가 있으면 안된다.
- 필드 대신 자바에서 공유되지 않는 지역변수, 파라미터, ThreadLocal 등을 사용해야 한다.


# DB 정규화
목표: 중복 데이터 최소화

이상적으로는 모든 엔티티타입, 속성, 관계가 반드시 하나만 존재하도록 설계

하지만 보통 3 ~ BCNF 정규화 까지만 진행한다.

테이블이 지나치게 많이 생성되면 SQL작성이 용이하지 않고, 과다한 테이블 조인으로 인한 성능 저하가 발생한다.

### 반정규화

데이터베이스 성능 향상을 위해 데이터 중복을 허용하고 조인을 줄이는 데이터베이스 성능 향상 방법

여러 개의 테이블을 단순하게 관리하므로 SQL 작성이 용이하고 성능이 향상되지만

데이터가 여러 테이블에 걸쳐 존재하므로 무결성이 깨질 우려가 있다.

- 컬럼 반정규화: 자주 조회하는 컬럼의 경우 중복컬럼 추가
- 관계 반정규화: 중복 관계를 추가하여 조회 경로 단축
    
    쇼핑몰의 경우 고객번호 → 주문 → 주문목록 → 배송 순으로 조회 하지만
    
    배송 테이블에 고객번호를 추가하면 바로 조회 가능
    

### 제 1 정규화

테이블의 컬럼이 원자값을 갖도록 테이블을 분해

즉 값을 2개 이상 가지고 있으면 안된다.

### 제 2 정규화

완전 함수 종속을 만족하도록 테이블을 분해

기본 키가 복합 키일 경우 복합 키의 부분집합이 결정자가 되어서는 안된다.

### 제 3 정규화

이행적 종속이 없도록 테이블을 분해

A → B, B → C, A → C 인 관계를 분해

### BCNF 정규화

결정자 후보 키가 아닌 함수 종속 제거

모든 결정자가 후보키가 되도록 테이블 분해

### 제 4 정규화

다중 종속 제거

특정 속성 값이 여러 개가 존재하고, 이 속성 값의 종류가 다수 존재하면 속성 별로 테이블 분리

A ↠ B, A ↠ C → B와 C 테이블 분리

### 제 5 정규화

조인 종속 제거

중복을 제거하기 위해 분해할 수 있을만큼 전부 분해